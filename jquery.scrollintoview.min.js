/*
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(t){var e={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},o={block:null,delta:0,duration:"fast",direction:"both"},l=/^(?:html)$/i,r=function(e,o){o=o||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var l=document.defaultView&&document.defaultView.getComputedStyle?!0:!1,r={top:parseFloat(l?o.borderTopWidth:t.css(e,"borderTopWidth"))||0,left:parseFloat(l?o.borderLeftWidth:t.css(e,"borderLeftWidth"))||0,bottom:parseFloat(l?o.borderBottomWidth:t.css(e,"borderBottomWidth"))||0,right:parseFloat(l?o.borderRightWidth:t.css(e,"borderRightWidth"))||0};return{top:r.top,left:r.left,bottom:r.bottom,right:r.right,vertical:r.top+r.bottom,horizontal:r.left+r.right}},i=function(e){var o=t(window),i=l.test(e[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:r(e[0]),scroll:{top:(i?o:e).scrollTop(),left:(i?o:e).scrollLeft()},scrollbar:{right:i?0:e.innerWidth()-e[0].clientWidth,bottom:i?0:e.innerHeight()-e[0].clientHeight},rect:function(){var t=e[0].getBoundingClientRect();return{top:i?0:t.top,left:i?0:t.left,bottom:i?e[0].clientHeight:t.bottom,right:i?e[0].clientWidth:t.right}}()}};t.fn.extend({scrollintoview:function(r){r=t.extend({},o,r),r.direction=e["string"==typeof r.direction&&r.direction.toLowerCase()]||e.both,"object"==typeof r.delta?t.extend(r.delta,{x:o.delta,y:o.delta}):r.delta={x:r.delta,y:r.delta};var c="";r.direction.x===!0&&(c="horizontal"),r.direction.y===!0&&(c=c?"both":"vertical");var s=this.eq(0),n=s.closest(":scrollable("+c+")");if(n.length>0){n=n.eq(0);var d={e:i(s),s:i(n)},a={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right},h={};r.direction.y===!0&&("start"==r.block?h.scrollTop=d.s.scroll.top+a.top:"end"==r.block?h.scrollTop=d.s.scroll.top+Math.min(a.top,-a.bottom):a.top<0?h.scrollTop=d.s.scroll.top+a.top:a.top>0&&a.bottom<0&&(h.scrollTop=d.s.scroll.top+Math.min(a.top,-a.bottom)),void 0!==h.scrollTop&&(h.scrollTop+=r.delta.y)),r.direction.x===!0&&("start"==r.block?h.scrollLeft=d.s.scroll.left+a.left:"end"==r.block?h.scrollLeft=d.s.scroll.left+Math.min(a.left,-a.right):a.left<0?h.scrollLeft=d.s.scroll.left+a.left:a.left>0&&a.right<0&&(h.scrollLeft=d.s.scroll.left+Math.min(a.left,-a.right)),void 0!==h.scrollLeft&&(h.scrollLeft+=r.delta.x)),t.isEmptyObject(h)?t.isFunction(r.complete)&&r.complete.call(n[0]):(l.test(n[0].nodeName)&&(n=t("html,body")),n.animate(h,r.duration).eq(0).queue(function(e){t.isFunction(r.complete)&&r.complete.call(n[0]),e()}))}return this}});var c={auto:!0,scroll:!0,visible:!1,hidden:!1};t.extend(t.expr[":"],{scrollable:function(t,o,r,i){var s=e["string"==typeof r[3]&&r[3].toLowerCase()]||e.both,n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,d={x:c[n.overflowX.toLowerCase()]||!1,y:c[n.overflowY.toLowerCase()]||!1,isRoot:l.test(t.nodeName)};if(!d.x&&!d.y&&!d.isRoot)return!1;var a={height:{scroll:t.scrollHeight,client:t.clientHeight},width:{scroll:t.scrollWidth,client:t.clientWidth},scrollableX:function(){return(d.x||d.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(d.y||d.isRoot)&&this.height.scroll>this.height.client}};return s.y&&a.scrollableY()||s.x&&a.scrollableX()}})}(jQuery);