/*
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(g){var j={vertical:{x:false,y:true},horizontal:{x:true,y:false},both:{x:true,y:true},x:{x:true,y:false},y:{x:false,y:true}};var n={duration:"fast",direction:"both"};var k=/^(?:html)$/i;var o=function(b,a){a=a||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(b,null):b.currentStyle);var f=document.defaultView&&document.defaultView.getComputedStyle?true:false;var c={top:(parseFloat(f?a.borderTopWidth:g.css(b,"borderTopWidth"))||0),left:(parseFloat(f?a.borderLeftWidth:g.css(b,"borderLeftWidth"))||0),bottom:(parseFloat(f?a.borderBottomWidth:g.css(b,"borderBottomWidth"))||0),right:(parseFloat(f?a.borderRightWidth:g.css(b,"borderRightWidth"))||0)};return{top:c.top,left:c.left,bottom:c.bottom,right:c.right,vertical:c.top+c.bottom,horizontal:c.left+c.right}};var l=function(a){var f=g(window);var c=k.test(a[0].nodeName);return{border:c?{top:0,left:0,bottom:0,right:0}:o(a[0]),scroll:{top:(c?f:a).scrollTop(),left:(c?f:a).scrollLeft()},scrollbar:{right:c?0:a.innerWidth()-a[0].clientWidth,bottom:c?0:a.innerHeight()-a[0].clientHeight},rect:(function(){var b=a[0].getBoundingClientRect();return{top:c?0:b.top,left:c?0:b.left,bottom:c?a[0].clientHeight:b.bottom,right:c?a[0].clientWidth:b.right}})()}};g.fn.extend({scrollintoview:function(a){a=g.extend({},n,a);a.direction=j[typeof(a.direction)==="string"&&a.direction.toLowerCase()]||j.both;var f="";if(a.direction.x===true)f="horizontal";if(a.direction.y===true)f=f?"both":"vertical";var c=this.eq(0);var h=c.parent().closest(":scrollable("+f+")");if(h.length>0){h=h.eq(0);h.scrollintoview(g.extend({},arguments[0],{complete:null}));var d={e:l(c),s:l(h)};var e={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right};var i={};if(a.direction.y===true){if(e.top<0){i.scrollTop=d.s.scroll.top+e.top}else if(e.top>0&&e.bottom<0){i.scrollTop=d.s.scroll.top+Math.min(e.top,-e.bottom)}}if(a.direction.x===true){if(e.left<0){i.scrollLeft=d.s.scroll.left+e.left}else if(e.left>0&&e.right<0){i.scrollLeft=d.s.scroll.left+Math.min(e.left,-e.right)}}if(!g.isEmptyObject(i)){if(k.test(h[0].nodeName)){h=g("html,body")}h.animate(i,a.duration).eq(0).queue(function(b){g.isFunction(a.complete)&&a.complete.call(h[0]);b()})}else{g.isFunction(a.complete)&&a.complete.call(h[0])}}return this}});var m={auto:true,scroll:true,visible:false,hidden:false};g.extend(g.expr[":"],{scrollable:function(b,a,f,c){if(b==document){return false}var h=j[typeof(f[3])==="string"&&f[3].toLowerCase()]||j.both;var d=(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(b,null):b.currentStyle);var e={x:m[d.overflowX.toLowerCase()]||false,y:m[d.overflowY.toLowerCase()]||false,isRoot:k.test(b.nodeName)};if(!e.x&&!e.y&&!e.isRoot){return false}var i={height:{scroll:b.scrollHeight,client:b.clientHeight},width:{scroll:b.scrollWidth,client:b.clientWidth},scrollableX:function(){return(e.x||e.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(e.y||e.isRoot)&&this.height.scroll>this.height.client}};return h.y&&i.scrollableY()||h.x&&i.scrollableX()}})})(jQuery);
